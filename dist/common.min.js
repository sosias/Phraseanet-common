!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?exports.common=e(require("jquery")):t.common=e(t.$)}("undefined"!=typeof self?self:this,function(t){return function(t){function e(n){if(i[n])return i[n].exports;var o=i[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var i={};return e.m=t,e.c=i,e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=2)}([function(e,i){e.exports=t},function(t,e,i){"use strict";function n(t){return t=parseInt(t,10),isNaN(t)||t<1?1:t}function o(t){return"DIALOG"+n(t)}function s(t,e){return!0===e.options.closeButton&&(t[e.services.localeService.t("fermer")]=function(){e.close()}),!0===e.options.cancelButton&&(t[e.services.localeService.t("annuler")]=function(){e.close()}),t}Object.defineProperty(e,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=i(0),l=function(t){return t&&t.__esModule?t:{default:t}}(a),u=function(t,e,i){var a=this,u={size:"Medium",buttons:{},loading:!0,title:"",closeOnEscape:!0,confirmExit:!1,closeCallback:!1,closeButton:!1,cancelButton:!1},c=void 0,d=void 0,f=this;if(e="object"===(void 0===e?"undefined":r(e))?e:{},this.closing=!1,this.options=l.default.extend(u,e),this.services=t,this.level=n(i),this.options.buttons=s(this.options.buttons,this),/\d+x\d+/.test(this.options.size)){var h=this.options.size.split("x");d=h[1],c=h[0]}else switch(this.options.size){case"Full":d=bodySize.y-30,c=bodySize.x-30;break;case"Medium":c=Math.min(bodySize.x-30,730),d=Math.min(bodySize.y-30,520);break;default:case"Small":c=Math.min(bodySize.x-30,420),d=Math.min(bodySize.y-30,300);break;case"Alert":c=Math.min(bodySize.x-30,300),d=Math.min(bodySize.y-30,150);break;case"Custom":c=Math.min(bodySize.x-30,this.options.customWidth),d=Math.min(bodySize.y-30,this.options.customHeight)}this.$dialog=function(t){var e=(0,l.default)("#"+o(t));if(e.length>0)throw"Dialog already exists at this level";return e=(0,l.default)('<div style="display:none;" id="'+o(t)+'"></div>'),(0,l.default)("body").append(e),e}(this.level),this.zIndex=5e3+parseInt(this.level,10);var p=function(){"function"==typeof f.options.closeCallback&&f.options.closeCallback(f.$dialog),!1===f.closing&&(f.closing=!0,f.close())};if(this.$dialog.data("ui-dialog")&&this.$dialog.dialog("destroy"),this.$dialog.attr("title",this.options.title).empty().dialog({buttons:this.options.buttons,draggable:!1,resizable:!1,closeOnEscape:this.options.closeOnEscape,modal:!0,width:c,height:d,open:function(t){(0,l.default)(t.currentTarget).dialog("widget").css("z-index",a.zIndex)},close:p}).dialog("open").addClass("dialog-"+this.options.size),!0===this.options.loading&&this.$dialog.addClass("loading"),"Full"===this.options.size){var v=this;(0,l.default)(window).unbind("resize.DIALOG"+n(i)).bind("resize.DIALOG"+n(i),function(){v.$dialog.data("ui-dialog")&&v.$dialog.dialog("option",{width:bodySize.x-30,height:bodySize.y-30})})}return this};u.prototype={close:function(){d.close(this.level)},setContent:function(t){this.$dialog.removeClass("loading").empty().append(t)},getId:function(){return this.$dialog.attr("id")},load:function(t,e,i){var n=this;this.loader={url:t,method:void 0===e?"GET":e,params:void 0===i?{}:i},l.default.ajax({type:this.loader.method,url:this.loader.url,dataType:"html",data:this.loader.params,beforeSend:function(){},success:function(t){n.setContent(t)}})},refresh:function(){if(void 0===this.loader)throw"Nothing to refresh";this.load(this.loader.url,this.loader.method,this.loader.params)},getDomElement:function(){return this.$dialog},getOption:function(t){return this.$dialog.data("ui-dialog")?this.$dialog.dialog("option",t):null},setOption:function(t,e){"buttons"===t&&(e=s(e,this)),this.$dialog.data("ui-dialog")&&this.$dialog.dialog("option",t,e)}};var c=function(){this.currentStack={}};c.prototype={create:function(t,e,i){this.get(i)instanceof u&&this.get(i).close();var n=new u(t,e,i);return this.currentStack[n.getId()]=n,n},get:function(t){var e=o(t);return e in this.currentStack?this.currentStack[e]:null},close:function(t){(0,l.default)(window).unbind("resize.DIALOG"+n(t)),this.get(t).closing=!0;var e=this.get(t).getDomElement();e.data("ui-dialog")&&e.dialog("close").dialog("destroy"),e.remove(),this.get(t).getId()in this.currentStack&&delete this.currentStack.id}};var d=new c;e.default=d},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.userModule=e.utilsModule=e.commonModule=e.dialogModule=void 0;var o=i(3),s=n(o),r=i(1),a=n(r),l=i(5),u=n(l),c=i(7),d=n(c);e.dialogModule=a.default,e.commonModule=s.default,e.utilsModule=d.default,e.userModule=u.default},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(void 0===e&&(e=!1),"disconnected"===t.status||"session"===t.status)return disconnected(),!1;if(e){var i=(0,r.default)("#notification_box");if(i.empty().append(t.notifications),i.is(":visible")&&fix_notification_height(),(0,r.default)(".notification.unread",i).length>0){var n=(0,r.default)("#notification_trigger");(0,r.default)(".counter",n).empty().append((0,r.default)(".notification.unread",i).length),(0,r.default)(".counter",n).css("visibility","visible")}else(0,r.default)("#notification_trigger .counter").css("visibility","hidden").empty();if(t.changed.length>0)for(var o=(0,r.default)(".SSTT.ui-state-active"),s=(o.length>0&&o.attr("id").split("_").pop(),!1),a=0;a!==t.changed.length;a++){var l=(0,r.default)("#SSTT_"+t.changed[a]);0===l.size()?!1===s&&((0,r.default)("#baskets .bloc").animate({top:30},function(){(0,r.default)("#baskets .alert_datas_changed:first").show()}),s=!0):l.hasClass("active")?(0,r.default)(".alert_datas_changed",(0,r.default)("#SSTT_content_"+t.changed[a])).show():l.addClass("unread")}""!==r.default.trim(t.message)&&(0===(0,r.default)("#MESSAGE").length&&(0,r.default)("body").append('<div id="#MESSAGE"></div>'),(0,r.default)("#MESSAGE").empty().append('<div style="margin:30px 10px;"><h4><b>'+t.message+'</b></h4></div><div style="margin:20px 0px 10px;"><label class="checkbox"><input type="checkbox" class="dialog_remove" />'+language.hideMessage+"</label></div>").attr("title","Global Message").dialog({autoOpen:!1,closeOnEscape:!0,resizable:!1,draggable:!1,modal:!0,close:function(){(0,r.default)(".dialog_remove:checked",(0,r.default)(this)).length>0&&r.default.ajax({type:"POST",url:"/user/preferences/temporary/",data:{prop:"message",value:0},success:function(t){}})}}).dialog("open"))}return!0}Object.defineProperty(e,"__esModule",{value:!0});var s=i(0),r=n(s),a=i(1),l=(n(a),i(4)),u=function(){var t=l.get("i18next");void 0===t&&(t="en-GB");var e=(0,r.default)("#mainMenu .helpcontextmenu");(0,r.default)(".context-menu-item",e).hover(function(){(0,r.default)(this).addClass("context-menu-item-hover")},function(){(0,r.default)(this).removeClass("context-menu-item-hover")})};e.default={initialize:u,manageSession:o}},function(t,e,i){var n,o;!function(s){var r=!1;if(n=s,void 0!==(o="function"==typeof n?n.call(e,i,e,t):n)&&(t.exports=o),r=!0,t.exports=s(),r=!0,!r){var a=window.Cookies,l=window.Cookies=s();l.noConflict=function(){return window.Cookies=a,l}}}(function(){function t(){for(var t=0,e={};t<arguments.length;t++){var i=arguments[t];for(var n in i)e[n]=i[n]}return e}function e(i){function n(e,o,s){var r;if("undefined"!=typeof document){if(arguments.length>1){if(s=t({path:"/"},n.defaults,s),"number"==typeof s.expires){var a=new Date;a.setMilliseconds(a.getMilliseconds()+864e5*s.expires),s.expires=a}s.expires=s.expires?s.expires.toUTCString():"";try{r=JSON.stringify(o),/^[\{\[]/.test(r)&&(o=r)}catch(t){}o=i.write?i.write(o,e):encodeURIComponent(String(o)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),e=encodeURIComponent(String(e)),e=e.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),e=e.replace(/[\(\)]/g,escape);var l="";for(var u in s)s[u]&&(l+="; "+u,!0!==s[u]&&(l+="="+s[u]));return document.cookie=e+"="+o+l}e||(r={});for(var c=document.cookie?document.cookie.split("; "):[],d=/(%[0-9A-Z]{2})+/g,f=0;f<c.length;f++){var h=c[f].split("="),p=h.slice(1).join("=");this.json||'"'!==p.charAt(0)||(p=p.slice(1,-1));try{var v=h[0].replace(d,decodeURIComponent);if(p=i.read?i.read(p,v):i(p,v)||p.replace(d,decodeURIComponent),this.json)try{p=JSON.parse(p)}catch(t){}if(e===v){r=p;break}e||(r[v]=p)}catch(t){}}return r}}return n.set=n,n.get=function(t){return n.call(n,t)},n.getJSON=function(){return n.apply({json:!0},[].slice.call(arguments))},n.defaults={},n.remove=function(e,i){n(e,"",t(i,{expires:-1}))},n.withConverter=e,n}return e(function(){})})},function(t,e,i){"use strict";function n(t,e){var i="pref_"+t;return s.default.data[i]&&s.default.data[i].abort&&(s.default.data[i].abort(),s.default.data[i]=!1),s.default.data[i]=s.default.ajax({type:"POST",url:"/user/preferences/",data:{prop:t,value:e},dataType:"json",timeout:s.default.data[i]=!1,error:s.default.data[i]=!1,success:function(t){return t.success?r.info(t.message):r.error(t.message),s.default.data[i]=!1,t}}),s.default.data[i]}Object.defineProperty(e,"__esModule",{value:!0});var o=i(0),s=function(t){return t&&t.__esModule?t:{default:t}}(o),r=i(6);r.info=r.spawn({addnCls:"humane-libnotify-info",timeout:1e3}),r.error=r.spawn({addnCls:"humane-libnotify-error",timeout:1e3}),r.forceNew=!0,e.default={setPref:n}},function(t,e,i){!function(e,i,n){t.exports=n("humane",i)}(0,this,function(t,e){var i=window,n=document,o={on:function(t,e,n){"addEventListener"in i?t.addEventListener(e,n,!1):t.attachEvent("on"+e,n)},off:function(t,e,n){"removeEventListener"in i?t.removeEventListener(e,n,!1):t.detachEvent("on"+e,n)},bind:function(t,e){return function(){t.apply(e,arguments)}},isArray:Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},config:function(t,e){return null!=t?t:e},transSupport:!1,useFilter:/msie [678]/i.test(navigator.userAgent),_checkTransition:function(){var t=n.createElement("div"),e={webkit:"webkit",Moz:"",O:"o",ms:"MS"};for(var i in e)i+"Transition"in t.style&&(this.vendorPrefix=e[i],this.transSupport=!0)}};o._checkTransition();var s=function(t){t||(t={}),this.queue=[],this.baseCls=t.baseCls||"humane",this.addnCls=t.addnCls||"",this.timeout="timeout"in t?t.timeout:2500,this.waitForMove=t.waitForMove||!1,this.clickToClose=t.clickToClose||!1,this.timeoutAfterMove=t.timeoutAfterMove||!1,this.container=t.container;try{this._setupEl()}catch(t){o.on(i,"load",o.bind(this._setupEl,this))}};return s.prototype={constructor:s,_setupEl:function(){var t=n.createElement("div");if(t.style.display="none",!this.container){if(!n.body)throw"document.body is null";this.container=n.body}this.container.appendChild(t),this.el=t,this.removeEvent=o.bind(function(){var t=o.config(this.currentMsg.timeoutAfterMove,this.timeoutAfterMove);t?setTimeout(o.bind(this.remove,this),t):this.remove()},this),this.transEvent=o.bind(this._afterAnimation,this),this._run()},_afterTimeout:function(){o.config(this.currentMsg.waitForMove,this.waitForMove)?this.removeEventsSet||(o.on(n.body,"mousemove",this.removeEvent),o.on(n.body,"click",this.removeEvent),o.on(n.body,"keypress",this.removeEvent),o.on(n.body,"touchstart",this.removeEvent),this.removeEventsSet=!0):this.remove()},_run:function(){if(!this._animating&&this.queue.length&&this.el){this._animating=!0,this.currentTimer&&(clearTimeout(this.currentTimer),this.currentTimer=null);var t=this.queue.shift();o.config(t.clickToClose,this.clickToClose)&&(o.on(this.el,"click",this.removeEvent),o.on(this.el,"touchstart",this.removeEvent));var e=o.config(t.timeout,this.timeout);e>0&&(this.currentTimer=setTimeout(o.bind(this._afterTimeout,this),e)),o.isArray(t.html)&&(t.html="<ul><li>"+t.html.join("<li>")+"</ul>"),this.el.innerHTML=t.html,this.currentMsg=t,this.el.className=this.baseCls,o.transSupport?(this.el.style.display="block",setTimeout(o.bind(this._showMsg,this),50)):this._showMsg()}},_setOpacity:function(t){if(o.useFilter)try{this.el.filters.item("DXImageTransform.Microsoft.Alpha").Opacity=100*t}catch(t){}else this.el.style.opacity=String(t)},_showMsg:function(){var t=o.config(this.currentMsg.addnCls,this.addnCls);if(o.transSupport)this.el.className=this.baseCls+" "+t+" "+this.baseCls+"-animate";else{var e=0;this.el.className=this.baseCls+" "+t+" "+this.baseCls+"-js-animate",this._setOpacity(0),this.el.style.display="block";var i=this,n=setInterval(function(){e<1?(e+=.1,e>1&&(e=1),i._setOpacity(e)):clearInterval(n)},30)}},_hideMsg:function(){var t=o.config(this.currentMsg.addnCls,this.addnCls);if(o.transSupport)this.el.className=this.baseCls+" "+t,o.on(this.el,o.vendorPrefix?o.vendorPrefix+"TransitionEnd":"transitionend",this.transEvent);else var e=1,i=this,n=setInterval(function(){e>0?(e-=.1,e<0&&(e=0),i._setOpacity(e)):(i.el.className=i.baseCls+" "+t,clearInterval(n),i._afterAnimation())},30)},_afterAnimation:function(){o.transSupport&&o.off(this.el,o.vendorPrefix?o.vendorPrefix+"TransitionEnd":"transitionend",this.transEvent),this.currentMsg.cb&&this.currentMsg.cb(),this.el.style.display="none",this._animating=!1,this._run()},remove:function(t){var e="function"==typeof t?t:null;o.off(n.body,"mousemove",this.removeEvent),o.off(n.body,"click",this.removeEvent),o.off(n.body,"keypress",this.removeEvent),o.off(n.body,"touchstart",this.removeEvent),o.off(this.el,"click",this.removeEvent),o.off(this.el,"touchstart",this.removeEvent),this.removeEventsSet=!1,e&&this.currentMsg&&(this.currentMsg.cb=e),this._animating?this._hideMsg():e&&e()},log:function(t,e,i,n){var o={};if(n)for(var s in n)o[s]=n[s];if("function"==typeof e)i=e;else if(e)for(var s in e)o[s]=e[s];return o.html=t,i&&(o.cb=i),this.queue.push(o),this._run(),this},spawn:function(t){var e=this;return function(i,n,o){return e.log.call(e,i,n,o,t),e}},create:function(t){return new s(t)}},new s})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,i,n){return e(t)+e(i)+e(n)}function e(t){if(null===t)return"00";var e=parseInt(t,10);return 0===e||isNaN(e)?"00":(e=Math.max(0,e),e=Math.min(e,255),e=Math.round(e),"0123456789ABCDEF".charAt((e-e%16)/16)+"0123456789ABCDEF".charAt(e%16))}function i(t,e,i){var o=void 0,s=void 0,r=void 0,a=void 0,l=void 0,u=void 0;return 0===e?a=l=u=255*i:(s=i<=.5?i*(e+1):i+e-i*e,o=2*i-s,r=t/360,a=n(o,s,r+1/3),l=n(o,s,r),u=n(o,s,r-1/3)),{r:a,g:l,b:u}}function n(t,e,i){return i<0?i+=1:i>1&&(i-=1),255*(6*i<1?t+(e-t)*i*6:2*i<1?e:3*i<2?t+(e-t)*(2/3-i)*6:t)}function o(t){return!!t.altKey||(!!t.ctrlKey||(!!t.metaKey||(17===t.keyCode||(224===t.keyCode||91===t.keyCode))))}function s(t){return!!t.shiftKey}return{RGBtoHex:t,hsl2rgb:i,is_ctrl_key:o,is_shift_key:s}}();e.default=n}])});